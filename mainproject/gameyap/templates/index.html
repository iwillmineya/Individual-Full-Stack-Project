{% extends "base.html" %}
{% block content %}

<div class="container-fluid">
  <div class="row">
    <!-- Left Leaderboard -->
    <aside class="col-lg-2 d-none d-lg-block">
      <div class="leaderboard p-3 mb-4 bg-white shadow rounded" style="min-height: 80vh;">
        <h4 class="text-center text-primary mb-3">Top 10 Overwatch</h4>
        <ol class="leaderboard-list" style="height: 70vh; overflow-y: auto; font-size: 0.95rem;">
          {% for player in leaderboard_ow %}
            <li class="mb-1">{{ forloop.counter }}. {{ player }}</li>
          {% endfor %}
        </ol>
        <div class="mt-4">
          <h5 class="text-center text-secondary">Honourable Mention</h5>
          <ul class="list-unstyled text-center">
            <li id="ow-honourable">appiekitty</li>
            <li id="ow-honourable">Crestedgecko</li>
            <li id="ow-honourable">Fequi</li>
          </ul>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="col-lg-8">
      <section class="hero-section text-center py-5" style="background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%); color: #fff; border-radius: 1rem; margin-bottom: 2rem;">
          <h1 class="display-4 fw-bold mb-3">Welcome to GameYap!</h1>
          <p class="lead mb-4">Discover, track, and share your favorite games. Add new games, edit details, and manage your collection with ease.</p>
          {% if user.is_authenticated %}
              <a href="{% url 'game_create' %}" class="btn btn-light btn-lg shadow">Add New Game</a>
          {% else %}
              <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg shadow">Login to Add Games</a>
          {% endif %}
      </section>

      <section aria-labelledby="game-list-heading">
          <h2 id="game-list-heading" class="mb-4 text-center fw-bold">Game Library</h2>
          <div class="row g-4 justify-content-center" role="list">
              {% for game in games %}
                  <article class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex" role="listitem">
                      <div class="card mb-4 h-100 shadow-lg game-card" tabindex="0" aria-label="{{ game.title }} game card" style="transition: transform 0.2s, box-shadow 0.2s; border-radius: 1rem;">
                          <div class="card-body d-flex flex-column justify-content-between">
                              <h3 class="card-title text-primary fw-bold">{{ game.title }}</h3>
                              <p class="card-text mb-3">
                                  <span class="badge bg-info text-dark mb-2"><strong>Genre:</strong> {{ game.genre }}</span><br>
                                  <span class="badge bg-secondary mb-2"><strong>Release Date:</strong> {{ game.release_date }}</span><br>
                                  <span>{{ game.description }}</span>
                              </p>
                              <div class="mt-auto">
                              {% if user.is_authenticated %}
                                  <a href="{% url 'game_update' game.pk %}" class="btn btn-outline-warning me-2 mb-2" aria-label="Edit {{ game.title }}">Edit</a>
                                  <a href="{% url 'game_delete' game.pk %}" class="btn btn-outline-danger mb-2" aria-label="Delete {{ game.title }}">Delete</a>
                              {% endif %}
                              </div>
                          </div>
                      </div>
                  </article>
              {% empty %}
                  <div class="col-12 text-center">
                      <p class="fs-4 text-muted">No games found. Start by adding your first game!</p>
                  </div>
              {% endfor %}
          </div>
      </section>
    </main>

    <!-- Right Leaderboard -->
    <aside class="col-lg-2 d-none d-lg-block">
      <div class="leaderboard p-3 mb-4 bg-white shadow rounded" style="min-height: 80vh;">
        <h4 class="text-center text-danger mb-3">Top 10 Valorant</h4>
        <ol class="leaderboard-list" style="height: 70vh; overflow-y: auto; font-size: 0.95rem;">
          {% for player in leaderboard_val %}
            <li class="mb-1">{{ forloop.counter }}. {{ player }}</li>
          {% endfor %}
        </ol>
        <div class="mt-4">
          <h5 class="text-center text-secondary">Honourable Mention</h5>
          <ul class="list-unstyled text-center">
            <li id="val-honourable">sirraHT#9281</li>
            <li id="val-honourable">REV iwillmineyou#dog</li>
            <li id="val-honourable">Bean#3344</li>
          </ul>
        </div>
      </div>
    </aside>
  </div>
</div>

<style>
    .game-card:hover, .game-card:focus {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 0 8px 32px rgba(106,17,203,0.15), 0 1.5px 6px rgba(37,117,252,0.12);
        outline: none;
    }
    .hero-section {
        box-shadow: 0 4px 24px rgba(37,117,252,0.12);
    }
    .leaderboard {
        background: linear-gradient(135deg, #f8fafc 0%, #e3e6f3 100%);
        border-left: 6px solid #6a11cb;
        border-right: 6px solid #2575fc;
        max-height: 90vh;
    }
    .leaderboard-list {
        list-style: decimal inside;
        padding-left: 0;
        margin-bottom: 0;
    }
</style>

{% endblock %}